!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("L"));else if("function"==typeof define&&define.amd)define(["L"],t);else{var n="object"==typeof exports?t(require("L")):t(e.L);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,(e=>(()=>{"use strict";var t={336:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends HTMLElement{constructor(e){super();const t=document.createElement("div");t.classList.add("custom-panel","leaflet-bar");const n=document.createElement("input");n.type="search",n.placeholder="例: 東京都千代田区霞が関1-3-1",t.appendChild(n);const o=document.createElement("button");o.title="Powered by geolonia/normalize-japanese-addresses",o.innerText="検索",o.addEventListener("click",(()=>{console.log(n.value),e(n.value)})),t.appendChild(o);const r=document.createElement("style");r.innerHTML="\n\t\t\tdiv {\n\t\t\t\tdisplay: flex;\n\t\t\t\tborder: 2px solid rgba(0, 0, 0, 0.2);\n\t\t\t\tborder-radius: 4px;\n\t\t\t}\n\t\t\tbutton {\n\t\t\t\twidth: 50px;\n\t\t\t\theight: 50px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t";const a=this.attachShadow({mode:"open"});a.appendChild(r),a.appendChild(t)}}t.default=n,customElements.define("plugin-control",n)},374:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCoder=void 0;const r=o(n(787)),a=o(n(336)),d=o(n(239));class s{static createPin=(e,t,n)=>{const o=r.default.marker(t,{alt:`${n.pref} ${n.city} ${n.town}`}),a=r.default.popup().setContent(new d.default({都道府県:n.pref,市区町村:n.city,町名:n.town,緯度:t.lat,経度:t.lng}));o.bindPopup(a),o.setLatLng(t),o.addTo(e),o.openPopup()};static moveTo=(e,t)=>{e.flyTo(t)}}class l extends r.default.Control{_div;normalizer;map;constructor(e,t){super(t),this.normalizer=e}onAdd=e=>(this.map=e,this._div=r.default.DomUtil.create("div","leaflet-community-geocoder"),this._div.appendChild(new a.default(this.search)),this._div);on=e=>{this.map=e};search=async e=>{if(null==this.map)throw Error("searchメソッドを呼ぶ前に、GeoCoderをL.Mapオブジェクトと関連付ける必要があります");try{const t=await this.normalizeAddress(e);s.moveTo(this.map,t.latlng),s.createPin(this.map,t.latlng,t.parsedAddress)}catch(e){alert(e)}};normalizeAddress=async e=>{const t=await this.normalizer(e);if(t.level>=3)return{latlng:r.default.latLng({lat:t.lat,lng:t.lng}),parsedAddress:{pref:t.pref,city:t.city,town:t.town}};if(2==t.level){const e=`https://geolonia.github.io/japanese-addresses/api/ja/${t.pref}/${t.city}.json`,n=(await fetch(e).then((e=>e.json())))[0];return{latlng:r.default.latLng({lat:parseFloat(n.lat),lng:parseFloat(n.lng)}),parsedAddress:{pref:t.pref,city:t.city,town:t.town}}}throw Error("もう少し詳しい住所を入力してください")}}t.GeoCoder=l},239:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends HTMLElement{constructor(e){super();const t=this.attachShadow({mode:"open"}),n=document.createElement("table"),o=document.createElement("tbody");Object.entries(e).forEach((e=>{const t=document.createElement("tr"),n=document.createElement("td");n.innerText=e[0],t.appendChild(n);const r=document.createElement("td");r.innerText=e[1].toString(),t.appendChild(r),o.appendChild(t)})),n.appendChild(o),t.appendChild(n)}}t.default=n,customElements.define("popup-content",n)},787:t=>{t.exports=e}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.GeoCoder=void 0;var t=o(374);Object.defineProperty(e,"GeoCoder",{enumerable:!0,get:function(){return t.GeoCoder}})})(),r})()));